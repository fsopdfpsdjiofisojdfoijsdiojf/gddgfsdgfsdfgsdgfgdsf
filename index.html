<!doctype html>
<html lang="ru">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>deutwp10</title>
  <link rel="icon" href="favicon1.png" />
  <style>
    :root{
      --bg:#000;
      --fg:#c9c9c9;
      --fade-ms:800ms;
      --max-w:min(88vw,780px);
      --radius:5px;
      --bar-h:52px;
      --bar-bg:rgba(0,0,0,.753);
      --bar-border:rgba(15,15,15,.37);
      --hover-ms:100ms;

      --tilt-max:5;
      --squash-max:.014;
      --cursor-size:2px;
    }

    *,*::before,*::after{box-sizing:border-box;}
    html,body{height:100%;}
    body{
      margin:0;
      background:var(--bg);
      color:var(--fg);
      min-height:100dvh;
      overflow:hidden;
      font-family:ui-sans-serif,system-ui,-apple-system,Segoe UI,Roboto,Arial;
      display:flex;
      flex-direction:column;
      position:relative;
      isolation:isolate;
      cursor:none;
    }

    /* задний фон страницы */
    body::before{
      content:"";
      position:fixed;
      inset:0;
      z-index:-1;
      opacity:0.1;
      background:url("bgblack.png") center/cover no-repeat;
      filter:blur(6px) brightness(0.6);
    }

    .stage{
      flex:1; display:grid; place-items:center;
      padding:12px 0 10vmin;
      perspective:1000px;
    }
    .frame{
      max-width:var(--max-w); width:100%;
      aspect-ratio:auto;
      will-change:transform;
      transition:transform .18s ease;
    }

    .shot{
      display:block;
      width:100%; height:auto;
      border-radius:var(--radius);
      opacity:0;
      animation:fadeIn var(--fade-ms) ease forwards 80ms;
      position:relative;
      z-index:1;
    }

    figcaption.quote{
      margin-top:8px; max-width:88%; margin-inline:auto;
      font-size:10px; line-height:1.35;
      color:rgba(122,122,122,.8); text-align:center;
      opacity:0;
      border-top:.5px solid rgba(255,255,255,.05);
      padding-top:6px;
      animation:fadeUp 1200ms ease forwards 1000ms;
    }
    figcaption.quote:empty{display:none;}

    @keyframes fadeIn{0%{opacity:0; transform:scale(1.02)} 100%{opacity:1; transform:scale(1)}}
    @keyframes fadeUp{0%{opacity:0; transform:translateY(10px)} 100%{opacity:1; transform:translateY(0)}}

    .cursor{
      position:fixed; left:0; top:0; z-index:20; pointer-events:none;
      width:var(--cursor-size); height:var(--cursor-size);
      margin-left:calc(var(--cursor-size)/-2); margin-top:calc(var(--cursor-size)/-2);
      border-radius:50%;
      background:#fff;
      transform:translate(-100px,-100px);
      will-change:transform;
    }

    @media (max-width:520px){
      :root{--radius:14px; --bar-h:48px;}
      body{cursor:auto;}
      .cursor{display:none;}
    }
    @media (prefers-reduced-motion:reduce){
      body{cursor:auto;}
      .cursor{display:none;}
      .frame{transition:none;}
    }
  </style>
</head>
<body>
  <main class="stage" id="stage" data-tilt="on">
    <div class="frame" id="frame">
      <figure>
        <img class="shot" id="shot" src="logo.png" alt="deutwp10" />
        <figcaption class="quote" id="quote"></figcaption>
      </figure>
    </div>
  </main>

  <div class="cursor" id="cursor"></div>

  <script>
  (function(){
    const isTouch = 'ontouchstart' in window;
    const reduce = window.matchMedia('(prefers-reduced-motion: reduce)').matches;
    const stage = document.getElementById('stage');
    const frame = document.getElementById('frame');
    const shot = document.getElementById('shot');
    const cursorEl = document.getElementById('cursor');

    const quotes = [
      "медиагигант.",
      "deutwp10.com",
      "deutwp10"
    ];
    document.getElementById('quote').textContent =
      `“${quotes[Math.floor(Math.random()*quotes.length)]}”`;

    if (isTouch || reduce){
      stage.dataset.tilt='off';
      cursorEl.style.display='none';
      return;
    }

    let raf=null; let tx=.5, ty=.5; let x=.5,y=.5;

    function onMove(e){
      const rect=stage.getBoundingClientRect();
      tx=(e.clientX-rect.left)/rect.width;
      ty=(e.clientY-rect.top)/rect.height;
      cursorEl.style.transform=`translate(${e.clientX}px,${e.clientY}px)`;
      if(!raf) raf=requestAnimationFrame(tick);
    }
    function onLeave(){tx=.5; ty=.5; if(!raf) raf=requestAnimationFrame(tick);}

    function tick(){
      raf=null;
      const follow=0.15;
      x+= (tx-x)*follow;
      y+= (ty-y)*follow;

      const maxTilt=5;
      const tiltX=(y-.5)*-maxTilt;
      const tiltY=(x-.5)* maxTilt;
      frame.style.transform=`rotateX(${tiltX}deg) rotateY(${tiltY}deg)`;

      const squash=.01*((Math.abs(tiltX)+Math.abs(tiltY))/(maxTilt*2));
      shot.style.transform=`scale(${1+squash},${1-squash})`;

      if(Math.abs(tx-x)+Math.abs(ty-y)>.001){
        raf=requestAnimationFrame(tick);
      }
    }

    stage.addEventListener('mousemove',onMove);
    stage.addEventListener('mouseleave',onLeave);
  })();
  </script>
</body>
</html>

